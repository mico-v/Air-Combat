# 环境搭建详细指南

本文档为完全零基础的同学提供详细的开发环境搭建步骤。

## 一、安装 Visual Studio

### 1.1 下载 Visual Studio

1. 打开浏览器，访问：https://visualstudio.microsoft.com/zh-hans/downloads/
2. 找到 "Visual Studio 2022 Community"（免费版）
3. 点击"免费下载"按钮
4. 下载完成后，会得到一个名为 `VisualStudioSetup.exe` 的安装程序

### 1.2 安装 Visual Studio

1. **运行安装程序**
   - 双击 `VisualStudioSetup.exe`
   - 如果弹出用户账户控制窗口，点击"是"
   
2. **选择工作负载**
   - 安装程序启动后，会显示"工作负载"选择界面
   - ⚠️ 重要：勾选"使用 C++ 的桌面开发"
   - 这个选项会安装 C++ 编译器和相关工具
   
3. **选择单个组件**（可选）
   - 切换到"单个组件"标签页
   - 确保以下组件已勾选：
     - MSVC v143 - VS 2022 C++ x64/x86 生成工具
     - Windows 10 SDK 或 Windows 11 SDK
     - C++ 核心功能
   
4. **开始安装**
   - 点击右下角的"安装"按钮
   - 安装过程可能需要 30-60 分钟，取决于网速
   - 安装完成后，点击"启动"按钮

5. **首次启动配置**
   - 选择开发设置："Visual C++"
   - 选择颜色主题：根据个人喜好选择（推荐"浅色"或"深色"）
   - 可以选择跳过登录，也可以使用微软账号登录

## 二、验证安装

### 2.1 创建测试项目

1. 启动 Visual Studio
2. 点击"创建新项目"
3. 在搜索框中输入"Windows 桌面"
4. 选择"Windows 桌面应用程序"（C++）
5. 点击"下一步"
6. 输入项目名称："TestProject"
7. 选择保存位置
8. 点击"创建"

### 2.2 编译测试

1. 在 Visual Studio 中，按 `Ctrl + Shift + B` 编译项目
2. 底部的"输出"窗口应显示"生成成功"
3. 按 `F5` 运行程序
4. 如果看到一个空白的窗口，说明环境配置成功！

## 三、获取项目代码

### 方法一：使用 Git（推荐）

#### 3.1 安装 Git

1. 访问：https://git-scm.com/download/win
2. 下载并安装 Git
3. 安装时，所有选项保持默认即可

#### 3.2 克隆项目

1. 在电脑上选择一个文件夹（如：`C:\Projects`）
2. 在该文件夹中右键，选择"Git Bash Here"
3. 输入命令：
   ```bash
   git clone https://github.com/mico-v/Air-Combat.git
   ```
4. 等待下载完成

### 方法二：直接下载 ZIP

1. 访问项目主页：https://github.com/mico-v/Air-Combat
2. 点击绿色的"Code"按钮
3. 选择"Download ZIP"
4. 下载完成后，解压到一个文件夹

## 四、打开项目

### 4.1 在 Visual Studio 中打开

1. 找到项目文件夹中的 `Game.sln` 文件
2. 双击打开（会自动用 Visual Studio 打开）
3. 如果提示"重定解决方案目标"，选择"确定"
4. 等待项目加载完成

### 4.2 了解解决方案结构

在右侧的"解决方案资源管理器"中，你会看到：

```
解决方案 'Game'
└── Game (项目)
    ├── 头文件
    │   ├── core/
    │   ├── scene/
    │   ├── ui/
    │   ├── game_object/
    │   └── util/
    ├── 源文件
    │   ├── core/
    │   ├── scene/
    │   ├── ui/
    │   ├── game_object/
    │   └── util/
    └── 资源文件
        └── Game.rc
```

## 五、第一次编译

### 5.1 编译项目

1. 在菜单栏选择"生成" -> "生成解决方案"
2. 或直接按快捷键 `Ctrl + Shift + B`
3. 观察底部的"输出"窗口：
   - 如果显示"生成成功"，恭喜你！
   - 如果有错误，继续看下一步

### 5.2 常见编译错误及解决方法

#### 错误 1: 找不到 Windows SDK

**错误信息**：
```
错误 MSB8036: 找不到 Windows SDK 版本
```

**解决方法**：
1. 右键点击解决方案资源管理器中的"Game"项目
2. 选择"属性"
3. 在"配置属性" -> "常规"中
4. 将"Windows SDK 版本"改为你安装的版本
5. 点击"应用"和"确定"

#### 错误 2: 字符集问题

**错误信息**：
```
error C2440: 无法从 "const char *" 转换为 "LPCWSTR"
```

**解决方法**：
1. 右键项目，选择"属性"
2. "配置属性" -> "高级"
3. 将"字符集"改为"使用 Unicode 字符集"
4. 点击"应用"和"确定"

#### 错误 3: 找不到头文件

**错误信息**：
```
fatal error C1083: 无法打开包括文件: "xxx.h"
```

**解决方法**：
1. 检查文件是否存在于正确的文件夹中
2. 右键项目，选择"属性"
3. "C/C++" -> "常规" -> "附加包含目录"
4. 确保包含了所有源代码目录

### 5.3 运行项目

1. 确保编译成功
2. 按 `F5` 键开始调试运行
3. 第一次运行可能会比较慢
4. 如果一切正常，会看到游戏窗口

## 六、Visual Studio 基本使用

### 6.1 界面介绍

- **菜单栏**：位于最顶部，包含所有功能
- **工具栏**：常用功能的快捷按钮
- **解决方案资源管理器**：显示项目文件结构（右侧）
- **代码编辑器**：中间的主要区域，用于编写代码
- **输出窗口**：底部，显示编译信息和程序输出
- **错误列表**：显示编译错误和警告

### 6.2 常用操作

#### 查找文件
- 按 `Ctrl + ,` 快速搜索并打开文件
- 在解决方案资源管理器中直接浏览

#### 查找代码
- `Ctrl + F`：在当前文件中查找
- `Ctrl + Shift + F`：在整个解决方案中查找
- `Ctrl + H`：替换

#### 代码编辑
- `Ctrl + K, Ctrl + C`：注释选中的代码
- `Ctrl + K, Ctrl + U`：取消注释
- `Ctrl + K, Ctrl + D`：格式化整个文档
- `Ctrl + K, Ctrl + F`：格式化选中的代码

#### 导航
- `F12`：转到定义（查看函数实现）
- `Ctrl + -`：返回上一个位置
- `Ctrl + Shift + -`：前进到下一个位置

### 6.3 调试技巧

#### 设置断点
1. 在代码行号左侧的灰色区域点击
2. 会出现一个红色的圆点
3. 程序运行到这里时会暂停

#### 开始调试
1. 按 `F5` 开始调试
2. 程序会运行到第一个断点处暂停
3. 此时可以：
   - 查看变量的值（鼠标悬停在变量上）
   - 在"自动"窗口查看相关变量
   - 在"本地"窗口查看所有局部变量

#### 单步执行
- `F10`：单步跳过（不进入函数内部）
- `F11`：单步进入（进入函数内部）
- `Shift + F11`：单步跳出（跳出当前函数）
- `F5`：继续执行到下一个断点

## 七、准备资源文件

### 7.1 创建资源目录

在项目文件夹中创建以下目录：
```
res/
├── images/
└── sounds/
```

### 7.2 准备图片资源

游戏需要以下图片（BMP 格式）：
1. **plane.bmp**：玩家飞机（建议大小：200x300 像素）
2. **enemy.bmp**：敌方飞机（建议大小：200x200 像素）
3. **button.bmp**：开始按钮（建议大小：300x200 像素）

#### 如何制作 BMP 图片

**方法一：使用 Windows 画图工具**
1. 打开"画图"程序
2. 创建新图片，设置尺寸
3. 绘制或粘贴图片
4. 另存为 -> 选择"BMP"格式

**方法二：转换现有图片**
1. 找到喜欢的 PNG 或 JPG 图片
2. 用画图打开
3. 另存为 BMP 格式

**方法三：从网上下载**
1. 搜索"飞机 像素画"或"游戏素材"
2. 下载后转换为 BMP 格式

### 7.3 添加资源到项目

1. 在 Visual Studio 中，打开"资源视图"（视图 -> 其他窗口 -> 资源视图）
2. 右键"Game.rc"，选择"添加资源"
3. 选择"Bitmap"，点击"导入"
4. 选择你准备的 BMP 文件
5. 设置资源 ID（如：IDB_BITMAP_PLANE）

详细步骤见 `docs/06-游戏对象.md`

## 八、检查清单

在开始开发前，请确认以下事项：

- [ ] Visual Studio 已正确安装
- [ ] "使用 C++ 的桌面开发"工作负载已安装
- [ ] 项目能成功编译
- [ ] 项目能成功运行
- [ ] 了解 Visual Studio 基本操作
- [ ] 准备好图片资源

## 九、遇到问题？

### 获取帮助的途径

1. **查看文档**
   - 阅读 `docs/` 目录下的详细文档
   - 查看 `GuideBook.md` 实验指导书

2. **搜索错误信息**
   - 复制完整的错误信息
   - 在 Google 或 Bing 中搜索
   - 通常能找到解决方案

3. **提问**
   - 在项目 GitHub 页面提 Issue
   - 描述清楚问题和错误信息
   - 最好附上截图

### 常见问题快速链接

- Visual Studio 安装问题：https://docs.microsoft.com/zh-cn/visualstudio/install/
- Win32 编程入门：https://docs.microsoft.com/zh-cn/windows/win32/
- C++ 基础教程：https://www.runoob.com/cplusplus/

## 十、下一步

环境搭建完成后，建议按以下顺序学习：

1. ✅ 环境搭建（你已经完成了！）
2. 📖 阅读 `docs/02-框架概览.md` - 了解项目结构
3. 📖 阅读 `docs/03-Win32基础.md` - 学习 Win32 基础
4. 💻 开始跟随 `GuideBook.md` 编写代码
5. 🎮 运行并调试你的第一个游戏！

---

祝你学习顺利！如有问题，随时查看文档或提问。 💪
